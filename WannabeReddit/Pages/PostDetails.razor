@page "/post/{Id}"
@using WannabeReddit.HttpClients.ClientInterfaces
@using WannabeRedditShared.Domain.DTOs
@using WannabeRedditShared.Domain.Models
@inject IPostService PostService

<h1>@Post?.Title</h1>
<p class="text-muted">
    <span>Author: </span>
    <span>@Post?.Author.Name</span>
</p>

<p>
    @postBodyMarkup
</p>

@code {

    [Parameter]
    public string Id { get; set; }

    private Post Post { get; set; }

    private MarkupString postBodyMarkup;

    protected override async Task OnInitializedAsync()
    {
        await base.OnInitializedAsync();

        if (int.TryParse(Id, out int idInt))
        {
            Post = await PostService.GetPostAsync(idInt);

            // TODO(rune): MEGET USIKKERT!
            // TODO(rune): MEGET USIKKERT!
            // TODO(rune): MEGET USIKKERT!
            // TODO(rune): MEGET USIKKERT!
            // TODO(rune): MEGET USIKKERT!
            // TODO(rune): MEGET USIKKERT!
            // TODO(rune): MEGET USIKKERT!
            // TODO(rune): MEGET USIKKERT!
            // TODO(rune): MEGET USIKKERT!
            postBodyMarkup = (MarkupString)Post.Body;
        }
    }
}
